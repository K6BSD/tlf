2012-10-28  Thomas Beierlein <tomjbe@gentoo.org>

  * tlf.1.in: minor correction to man page

2012-10-26  Thomas Beierlein <tomjbe@gentoo.org>

  * src/callinput.c: fix tune logic.  
  - adapt to cwdaemons behaviour. It tunes only for a given time and 
    than automatically stop. 
  - So request some tuning time (6s) and allow for an early stop with 
    any key press. 
  - Change TUNE_UP constant if you want a different time.

2012-10-24  Thomas Beierlein <tomjbe@gentoo.org>

  * src/callinput.c, src/getexchange.c, src/time_update.c: stop flickering
  cursor while searchlog is shown  
  - during wait for input in call input or exchange field the searchlog 
    panel is regularly updated. That makes the cursor switch between 
    different places and showing a flickering effect. 
  - New logic dropped the time delay from 'time_update()' (as that 
    function should not determine the speed of the keyboard polling) 
    and added the delay into the polling loop so that the cursor is 
    a long time in the input field.

2012-10-27  Thomas Beierlein <tomjbe@gentoo.org>

  * src/callinput.c: convert file back to Unix LF endings

2012-10-26  Thomas Beierlein <tomjbe@gentoo.org>

  * src/set_tone.c: work around bugs in cwdaemon versions  
  - cwdaemon < 0.9.6 always set volume to 70% at change of tone freq 
  - cwdaemon >=0.9.6 do not set volume at all after change of freq 
    resulting in no tone output if you have a freq=0 in between 
  - So... to be sure we set the volume back to our chosen
    value or to 70% (like cwdaemon) if no volume got specified

2012-10-23  Thomas Beierlein <tomjbe@gentoo.org>

  * src/sendspcall.c: use '}' and '{' only for MFJ1278 keyer to switch TX on
  and off

2012-10-18  Thomas Beierlein <tomjbe@gentoo.org>

  * src/main.c, src/parse_logcfg.c, src/parse_logcfg.h, src/rules.c: ask for
  confirmation if errors in logcfg.dat or rule file detected  
  - for some time tlf reports errors in both configuration files but gives 
    user only 2 seconds time to read the problem. The changes records 
    that some problems exists and ask the user after processing the files 
    if we should continue or stop the program and fix the problem. 
    That gives them time to read the problems and think it over.

2012-10-14  Thomas Beierlein <tomjbe@gentoo.org>

  * src/parse_logcfg.c, src/set_tone.c: fix control of sidetone output  
  - CWTONE drops trailing newline now (was not recognized by cwdaemon 0.9.2 
    if there was a trailing newline) 
  - :tone did not initialize box correctly. Old screen contents showed 
    through the frame.

2012-10-09  Thomas Beierlein <tb@forth-ev.de>

  * src/parse_logcfg.c: Correct wording for some error message

  * rules/arrl10m_dx: fix typo wrt CQ_TU_MSG

2012-10-13  Thomas Beierlein <tomjbe@gentoo.org>

  * src/sendbuf.c: correct parsing of special characters in sendbuf() function 
  - old logic assumes that there is always a trailing newline so it checks 
    only until strlen(text)-1 is reached 
    - new code checks all characters until string end.

  * src/write_keyer.c: shorten macro output in digimode  
  - old implementation had 5 empty lines for each macro output. 
    1 from message eol, 2 from write_keyer routine, 1 from echo, 
    1 from fldigi
  - dropped 1 of the lines in output string 
  - used '-n' switch to force echo to not append a further newline 
  - simplify command formatting

2012-10-06  Thomas Beierlein <tomjbe@gentoo.org>

  * src/getexchange.c, src/rtty.c: update miniterm also while in getexchange()

  * src/rtty.c: make miniterm output more robust  
  - strncpy may leave non terminated strings, so switch to g_strlcpy 
  - mvprintw needs a format string to avoid interpretation of '%' signs 
    in the received text.

  * src/rtty.c: rework digimode receive routine 'rx_rtty()'  
  - fix buffer overrun in rx_addtext 
  - better logic to skip start of line info from GMFSK and FlDigi 
  - do not skip start of line if serial modem (MFJ or siimilar)

2012-09-14  Thomas Beierlein <tb@forth-ev.de>

  * src/searchlog.c: Old code segfaults for really long calls in 'searchlog'  
  - happens for long call signs which fill the call field 
  - strchr return NULL if space is not found, so limit string only if 
    a space is really found

2012-08-23  Thomas Beierlein <tomjbe@gentoo.org>

  * configure.ac, ChangeLog, AUTHORS, NEWS: prepare for 1.1.3 maintenance 
    release

  * src/parse_logcfg.c: Second part of reworked parsing logic  
  - All keywords which require a parameter after an '=' use the 
    preparsed fields[1] variable now. 
  - To catch wrong syntax in the config file the macro PARAMETER_NEEDED
    tests if needed that there was such a '=' in the config entry.

2012-08-16  Thomas Beierlein <tb@forth-ev.de>

  * src/parse_logcfg.c: Fixes nasty problem in parsing of preferences from
  logcfg.dat and rules file  
  - David N1EA and Martin OK1RR are reporting not working CLUSTERLOGIN. 
  - Reason was change in parsing logic done between tlf-1.0.5 and
    tlf-1.1.0. TLF now stopped at keyword CLUSTER mas it was a substring of
    CLUSTERLOGIN. So CLUSTERLOGIN got never called. Thorough inspection showed
    that it may affect also other settings.  
  - New logic starts by splitting the inputline at a potential '=' sign.
    First part: the keyword, second part (if available): the parameters. 
    The keyword gets stripped on both sides, the parameter only from 
    leading spaces. That allows something like ' CALL = DL1JBE'. 
  - All keywords in the keyword list were stripped from a trailing '='
    sign. If you need to decide if it got called correctly, than look at the
    second field in the parsed array.

2012-08-13  Thomas Beierlein <tomjbe@gentoo.org>

  * src/changepars.c, src/main.c, src/parse_logcfg.c: Add tilde expansion for
  config file switch (-f)  
  - -f command line switch allows use of an alternate logfilei. Until now 
    it does not recognize '~' as abbreviation for the users HOME  
    directory (Thanks David N1EA for reporting). 
  - If logfilename starts with ~/ it gets replaced now by users home directory.

2012-08-13  Thomas Beierlein <tb@forth-ev.de>

  * tlf.1.in: comment CWBANDWIDTH= preference switch  
  - Normally in CW mode tlf sets the (hamlib defined) default bandwidth i
    during each switch of bands. 
  - If you need a different bandwidth you can set it with these switch i
    in logcfg.dat

2012-08-23  Thomas Beierlein <tb@forth-ev.de>

  * .gitignore, aclocal.m4: remove unneeded 'aclocal.m4' and add it to
  .gitignore  
  They will be created automatically if you run 'autoreconf' after
  an checkout. so there is no need to have it in the repository.

2012-08-10  Thomas Beierlein <tb@forth-ev.de>

  * config.h.in, configure.ac, configure.in: Prepare for Automake-1.13 which no
  longer accepts a configure.in  * move configure.in to configure.ac *
  regenerate config.h.in

2012-06-06  Thomas Beierlein <tb@forth-ev.de>

  * configure.in: Abort configure if ncurses libs not vailable. Tnx Jens DK2AB
  for pointing it out.

2012-06-05  Thomas Beierlein <tomjbe@gentoo.org>

  * src/gettxinfo.c, src/main.c, src/parse_logcfg.c: drop 'nobandchange'
  variable  Got set only if CWBANDWIDTH was 0 and than the code sets the
  DEFAULTBANDWIDTH anyway.

2012-06-06  Thomas Beierlein <tb@forth-ev.de>

  * src/showscore.c: Drop unneeded include statement

2012-04-18  Thomas Beierlein <tomjbe@gentoo.org>

  * share/usa_canada_states: remove old 'usa_canada_states' file, use
  arrldx_mults instead
  * rules/arrldx_dx, share/arrldx_mults: add actual mults file for ARRLDX
  contest for DX and adapt path (tnx Fred DH5FS)

2012-03-31  Thomas Beierlein <tomjbe@gentoo.org>

  * rules/arrl10m_dx, share/arrl10m_mults: add ARRL 10m contest 
    (tnx Fred DH5FS)
  * src/parse_logcfg.c, src/score.c: correct naming of functions
  * src/score.c: simplify loop exit logic

2012-03-18  Thomas Beierlein <tomjbe@gentoo.org>

  * src/parse_logcfg.c: fix recognition of COUNTRY_LIST= keyword 
  - multiplier_list was uninitialized. If it was not empty 
    COUNTRY_LIST definitions would not be recognized 
  - use glib for better handling of string termination

2012-03-19  Thomas Beierlein <tb@forth-ev.de>

  * src/main.c, src/parse_logcfg.c, src/score.c: simplify COUNTRYLIST handling
  - renamed 'multiplier_only' to 'countrylist_only' 
  - renamed 'multiplier_points' to 'countrylist_points' 
  - simplify naming scheme for local variables

2012-03-16  Thomas Beierlein <tomjbe@gentoo.org>

  * src/getexchange.c: rework checkexchange handling 
  - fix out of bounds error resulting in a segfault 
  - better maintainability by automatic calculation of loop boundaries 
    for pattern scanning

2012-02-28  Thomas Beierlein <tomjbe@gentoo.org>

  * src/parse_logcfg.c: better regognition of unknown keywords in logcfg.dat
  and rules file

2012-02-27  Thomas Beierlein <tomjbe@gentoo.org>

  * rules/arrldx_dx, rules/pacc_dx, rules/spdx_dx: fix wrong keyword:
  'RECALL_EXCHANGE' is 'RECALL_MULTS' now

2012-02-19  Thomas Beierlein <tb@forth-ev.de>

  * src/audio.c: Simplify audio recording by factoring out common code

2012-01-18  Thomas Beierlein <tomjbe@gentoo.org>

  * src/main.c: simplify string handling

2012-01-17  Thomas Beierlein <tomjbe@gentoo.org>

  * src/Makefile.am, src/printfield.c, src/printfield.h, src/showscore.c,
  src/showscore.h: Merge printfield() into showscore.c  - only used for
  showscore() - simplify printfield() function. - drop unneeded include file
  from showscore.c

2012-01-15  Thomas Beierlein <tomjbe@gentoo.org>

  * NEWS: Fix spelling error for G4KNO

2012-01-14  Thomas Beierlein <tomjbe@gentoo.org>

  * src/calledit.c: simplify calledit()  
    - drop not working keys for 'home' and 'down' 
    - factor out display code 
    - fix display of background for partials when leaving edit mode

2012-01-12  Thomas Beierlein <tomjbe@gentoo.org>

  * src/changepars.c, src/main.c: Make sure that no packet related functions
  get called if started with 'tlf -n'

2012-01-12  Thomas Beierlein <tb@forth-ev.de>

  * src/makelogline.c, src/makelogline.h: Fix makelogline segfault  if not in 
  contest mode Logline gets not cut back to 68 characters. Results in a buffer
  overflow.  Add description of logline format

2012-01-08  Thomas Beierlein <tomjbe@gentoo.org>

  * doc/Makefile.am, doc/README.ssb: Added README.ssb from Andy, G4KNO. Thanks
  for contributing.

2012-01-03  Thomas Beierlein <tomjbe@gentoo.org>

  * scripts/play_vk: fix spelling of unmute command. Tnx G4KNO

2011-12-22  Thomas Beierlein <tomjbe@gentoo.org>

  * NEWS, doc/README: move tlf's history of changes to NEWS file
  * tlf.1.in: adapt man page to new features

2011-12-21  Thomas Beierlein <tomjbe@gentoo.org>

  * Makefile.am, NEWS, New_Bandmap.txt, doc/Makefile.am, doc/New_Bandmap.txt:
  Move New_Bandmap.txt to doc/

  * NEWS: summarize changes made between tlf-1.0.5 and tlf-1.1.0

  * share/cty.dat: new cty.dat from OK1RR. Thanks

2011-12-17  Thomas Beierlein <tomjbe@gentoo.org>

  * New_Bandmap.txt, share/logcfg.dat: document configuration of bandmap
  filtering

  * src/parse_logcfg.c: fix location of #endif line

  * src/bandmap.c: leave some headroom for grabbing next frequency

  * src/bandmap.c, src/checklogfile.h, src/logit.c, src/netkeyer.c,
  src/printcall.c, src/showscore.c, src/splitscreen.c, src/startmsg.c,
  src/tlf.h: further cleanup  - fix implicit declaration warnings - drop unused
  variables

2011-12-14  Thomas Beierlein <tb@forth-ev.de>

  * src/parse_logcfg.c, src/rules.c: cleanup  - drop unused variable - fix
  wrong initialisation of 'buff'

2011-12-14  Thomas Beierlein <tomjbe@gentoo.org>

  * tlf.1.in: Fix description of LOWBAND_DOUBLE keyword in man page.

2011-12-13  Thomas Beierlein <tomjbe@gentoo.org>

  * src/parse_logcfg.c: divide livetime by 2 as aging is done every two seconds

  * src/parse_logcfg.c: allow configuration of bandmap filtering in logcfg.dat 

2011-12-12  Thomas Beierlein <tomjbe@gentoo.org>

  * src/parse_logcfg.c, src/tlf.h: fix recognition of keywords
  - keywords with parameters did not work if keyword was not in first column

2011-12-10  Thomas Beierlein <tomjbe@gentoo.org>

  * src/bandmap.c, src/bandmap.h: dupes will be skipped during ctrl-g 
  - make that feature configurable via bm_config.skipdupes

2011-12-11  Thomas Beierlein <tomjbe@gentoo.org>

  * src/parse_logcfg.c, src/parse_logcfg.h: better report of unsupported config
  keywords  

2011-11-24  Thomas Beierlein <tb@forth-ev.de>

  * src/dxcc.c, src/grabspot.c, src/grabspot.h: fix prototypes  - fix missing
  '#include <string.h>' - add missing prototype for 'grab_next' - change
  prototype of grabspot to return void

  * src/addmult.c: fix wrong check for empty string in multiplier file

  * src/callinput.c, src/changepars.c, src/main.c, src/printcall.c, src/rtty.c:
  Fix use of 'miniterm' variable  - clean old code - add comments - save and
  restore variable if temporary disabled

  * New_Bandmap.txt: Add some additional informations describing the new
  bandmap functions.

  * src/callinput.c, src/grabspot.c: Fix calculation of zone and prefix for
  grabspot()  - Zone and prefix was not calculated correctly during grab of a
  station from bandmap. It was needed to call 'getctydata()' instead of
  'getctynr()' - Drop clear_display after grab. Now the info line is displayed
  properly.  Thanks Fred DM3F for reporting.

2011-11-16  Thomas Beierlein <tomjbe@gentoo.org>

  * INSTALL, configure.in: prepare for TLF-1.1pre3 release

  * scripts/Makefile.am, scripts/play_vk, src/callinput.c: Use external script
  'play_vk' for playing of SSB voice key messages

  * share/Makefile.am: add list of usa_canada_states to installation files  -
  in distribution since 0.9.11 but forgotten in Makefile.am

2011-11-14  Thomas Beierlein <tomjbe@gentoo.org>

  * src/getexchange.c: change parsing of section for ARRL SS  - trailing spaces
  in mults_possible[] and cut out section string deleted - compare only pure
  non-space strings

  * src/getexchange.c: Fix possible segfaults  - old code segfaults if serial
  number >9999 was entered - simplify reading of check value

  * src/getexchange.c, src/searchlog.c, src/searchlog.h: Display parsing
  results for ARRL SS  - displayed on lower line of Search panel again

  * src/searchlog.c: fix display of needed sections  - readcalls cuts always 3
  char to worked mults[] fro some contests - ignore possible trailing spaces in
  compare

  * src/clear_display.c: display contest name on info line

2011-11-10  Thomas Beierlein <tomjbe@gentoo.org>

  * rules/Makefile.am: add forgotten general 'contest' rule file to installable
  files

  * rules/arrlss: Better defaults for CW messages  - exchange has to use serial
  number instead of a fixed '1' - make check consistent between messages

  * src/getexchange.c: Fix recognition of 'U' precedent  - got introduced late
  and was not recognized properly - add some comments to the meaning of the
  searchpatterns

  * src/searchlog.c: some minor optimization  - drop unneeded statement - break
  out of loop as soon as possible

  * src/searchlog.c, src/showscore.c, src/showscore.h: Fix display of section
  in ARRL_SS  - moved display code to searchlog.c - use SearchPanel for display
  - thanks for reporting to Ben NJ8J

2011-11-07  Thomas Beierlein <tomjbe@gentoo.org>

  * src/callinput.c, src/getexchange.c, src/logit.c, src/logit.h: make Ctrl-A
  also work in exchange field  - calls addspot() to add the actual call to the
  bandmap - correct hide of searchlog


2011-11-07  Thomas Beierlein <tomjbe@gentoo.org>

  * src/readcalls.c: strip trailing spaces on comments from log file

2011-11-06  Thomas Beierlein <tomjbe@gentoo.org>

  * src/changefreq.c, src/changefreq.h: hide cursor during frequnecy change

  * src/callinput.c: Allow edit of old QSO's only if call field is empty

  * src/calledit.c, src/callinput.c, src/getexchange.c: correct display of
  cursor if searchwindow is shown  

2011-11-05  Thomas Beierlein <tomjbe@gentoo.org>

  * src/main.c, src/searchlog.h: fix display of startup messages

2011-11-06  Thomas Beierlein <tomjbe@gentoo.org>

  * src/listmessages.c: correct displayed message name for CQmsg

2011-09-24  Thomas Beierlein <tomjbe@gentoo.org>

  * src/parse_logcfg.c, src/tlf.h: Report unsupported config keywords during
  startup

  * rules/arrldx_dx, rules/arrldx_usa, rules/arrlfd, rules/arrlss,
  rules/contest, rules/cqww, rules/dxped, rules/eusprint, rules/lzdx,
  rules/pacc_dx, rules/pacc_pa, rules/qso, rules/spdx_dx, rules/spdx_sp,
  rules/ssa_mt, rules/template, rules/wpx, src/parse_logcfg.c: change keywords
  in parse_logcfg.c to correspond to man page  The keywords for CQ_TU_MSG,
  VKCQM and VKSPM were not recognized correctly. Fixed.  Adapt contest rules to
  changed keywords.

2011-11-03  Thomas Beierlein <tomjbe@gentoo.org>

  * src/getexchange.c: Send VKCQM and VKSPM voice messages after end of QSO  -
  Drop a change made by Rein in tlf-0.9.22 to not send these messages if in SSB
  mode 

2011-11-01  Thomas Beierlein <tomjbe@gentoo.org>

  * src/getexchange.c: '+' and 'INSERT' respect CTCOMPATIBLE mode also during
  getexchange()

2011-10-29  Thomas Beierlein <tomjbe@gentoo.org>

  * src/callinput.c: '+' and 'INSERT' respect CTCOMPATIBLE mode now  - if
  callfield not empty both keys are working now only if CTCOMPATIBLE is set in
  logcfg.dat

2011-10-28  Thomas Beierlein <tomjbe@gentoo.org>

  * src/gettxinfo.c: Fix upper boundaries for 160 and 40 meters.  - Thanks Ben
  NJ8J for reporting

2011-10-27  Thomas Beierlein <tomjbe@gentoo.org>

  * aclocal.m4, configure.in: prepare for prerelease 2 of tlf-1.1  - fix
  aclocal.m4

  * src/clear_display.c, src/printfield.c, src/showscore.c: move score display
  in upper right corner of display

  * src/logit.c, src/searchlog.c, src/searchlog.h: Hide searchlog panel at more
  points

2011-10-23  Thomas Beierlein <tomjbe@gentoo.org>

  * src/muf.c: propagation display uses panel code now

  * src/searchlog.c, src/searchlog.h, src/time_update.c: Use panel code for
  show and hide of searchlog

2011-01-30  Thomas Beierlein <tb@forth-ev.de>

  * src/nicebox.c, src/nicebox.h: factorisation to support nicebox for given
  window 

2011-10-20  Thomas Beierlein <tomjbe@gentoo.org>

  * src/addmult.c, src/audio.c, src/autocq.c, src/background_process.c,
  src/bandmap.c, src/calledit.c, src/callinput.c, src/changepars.c,
  src/checklogfile.c, src/cleanup.c, src/clear_display.c, src/clusterinfo.c,
  src/deleteqso.c, src/displayit.c, src/edit_last.c, src/editlog.c,
  src/freq_display.c, src/getexchange.c, src/getmessages.c, src/gettxinfo.c,
  src/grabspot.c, src/keyer.c, src/lancode.c, src/listmessages.c,
  src/log_to_disk.c, src/logit.c, src/logview.c, src/main.c,
  src/messagechange.c, src/muf.c, src/netkeyer.c, src/parse_logcfg.c,
  src/printcall.c, src/readcalls.c, src/readctydata.c, src/recall_exchange.c,
  src/rtty.c, src/rules.c, src/searchlog.c, src/sendbuf.c, src/sendqrg.c,
  src/setparameters.c, src/show_help.c, src/showpxmap.c, src/showscore.c,
  src/splitscreen.c, src/startmsg.c, src/writeparas.c: switch all refresh()
  calls for use of curses panels  - add a fake refreshp() function which
  replaces the old refresh() and calls 'update_panels()' followed by
  'doupdate'. - serialize refreshp() calls from different threads

2011-10-23  Thomas Beierlein <tomjbe@gentoo.org>

  * src/bandmap.c: fix delete of first line in bandmap (was one char to short)

2011-01-28  Thomas Beierlein <tb@forth-ev.de>

  * config.h.in, configure.in: Prepare usage curses panel library

2011-10-17  Thomas Beierlein <tomjbe@gentoo.org>

  * src/clusterinfo.c, src/splitscreen.c: proper locking for spot_ptr[] array 

2011-10-16  Thomas Beierlein <tomjbe@gentoo.org>

  * share/logcfg.dat, src/callinput.c, src/changepars.c, src/clusterinfo.c,
  src/main.c, src/parse_logcfg.c, src/setparameters.c, src/tlf.h, tlf.1.in:
  Drop old SPOTLIST display 
  - ALT-a now switches between Nocluster->Cluster->Bandmap-> 
  - 'cluster == MAP' displays the new bandmap and writes the last 8 spots to
  Xplanet's marker file.

2011-10-14  Thomas Beierlein <tomjbe@gentoo.org>

  * src/Makefile.am, src/cluster_bg.c, src/cluster_bg.h: Delete unneeded
  cluster_bg.[ch] files  - functionality is now in clusterinfo.c

  * src/background_process.c, src/background_process.h, src/cluster_bg.c,
  src/clusterinfo.c: Move 'getclusterinfo()' to clusterinfo.c  

  * src/cluster_bg.c, src/cluster_bg.h, src/clusterinfo.c, src/clusterinfo.h:
  Move 'loadbandmap()' to clusterinfo.c

2011-10-13  Thomas Beierlein <tomjbe@gentoo.org>

  * src/cluster_bg.c: change source of data for loadbandmap()

2011-10-11  Thomas Beierlein <tomjbe@gentoo.org>

  * src/callinput.c, src/cluster_bg.c, src/main.c: cleanup unneeded code  -
  drop double extern declarations - drop handling of spotinfo filed as nobody
  uses that information

  * src/cluster_bg.c, src/main.c, src/splitscreen.c: on the fly recognition of
  WWV/WCY announcements 

2011-10-07  Thomas Beierlein <tomjbe@gentoo.org>

  * src/bandmap.c: keep display of frequency memory (#) 

2011-10-06  Thomas Beierlein <tomjbe@gentoo.org>

  * src/addmult.c, src/addmult.h, src/globalvars.h, src/readcalls.c: refactor
  registration of worked multiplier and multi initialisation 

  * src/addmult.c, src/addmult.h, src/searchlog.c, src/searchlog.h: move
  'load_multipliers()' to addmult.c

  * src/addmult.c: drop old comment regarding 'wysiwymultsg' variable

2011-10-05  Thomas Beierlein <tb@forth-ev.de>

  * README: Edited README

2011-10-05  Thomas Beierlein <tomjbe@gentoo.org>

  * .gitignore, src/showscore.c: Do not show mults per band in WYSIWYG_ONCE
  mode. 

2011-10-05  Thomas Beierlein <tb@forth-ev.de>

  * src/addmult.c, src/globalvars.h, src/main.c, src/readcalls.c,
  src/showscore.c: Remove 'wysiwygmults' variable 

  * src/addmult.c, src/changepars.c, src/getsummary.c, src/globalvars.h,
  src/readcalls.c, src/showscore.c: Remove 'multcount' variable

2011-10-02  Thomas Beierlein <tomjbe@gentoo.org>

  * src/addmult.c: Further simplifications 

2011-10-01  Thomas Beierlein <tomjbe@gentoo.org>

  * src/addmult.c, src/changepars.c, src/getexchange.c, src/globalvars.h,
  src/main.c, src/showscore.c: Complete new handling of mults_possible[] length

2011-09-30  Thomas Beierlein <tomjbe@gentoo.org>

  * src/addmult.c: Prepare factorization of addmult() and addmult2()  Prepare
  factorization of lookup of possible mults and worked mults

2011-09-24  Thomas Beierlein <tomjbe@gentoo.org>

  * src/parse_logcfg.c, src/tlf.h: Report unsupported config keywords during
  startup

  * rules/arrldx_dx, rules/arrldx_usa, rules/arrlfd, rules/arrlss,
  rules/contest, rules/cqww, rules/dxped, rules/eusprint, rules/lzdx,
  rules/pacc_dx, rules/pacc_pa, rules/qso, rules/spdx_dx, rules/spdx_sp,
  rules/ssa_mt, rules/template, rules/wpx, src/parse_logcfg.c: change keywords
  in parse_logcfg.c to correspond to man page  The keywords for CQ_TU_MSG,
  VKCQM and VKSPM were not recognized correctly. Fixed.  Adapt contest rules to
  changed keywords.

2011-10-01  Thomas Beierlein <tomjbe@gentoo.org>

  * src/addmult.c, src/changepars.c, src/getexchange.c, src/globalvars.h,
  src/main.c, src/showscore.c: Complete new handling of mults_possible[] length

2011-09-30  Thomas Beierlein <tomjbe@gentoo.org>

  * src/addmult.c: first steps to a rework multi scoring 

2011-10-01  Thomas Beierlein <tomjbe@gentoo.org>

  * src/main.c, src/parse_logcfg.c, src/searchlog.c, tlf.1.in: Better handling
  of lines from external multiplier file  - Allow comment lines (starting with
  '#') - strip leading and trailing whitespace - drop empty lines  Furthermore
  drop unneeded string variables and make global ones local.

2011-02-03  Thomas Beierlein <tb@forth-ev.de>

  * rules/arrldx_dx, rules/arrldx_usa, rules/arrlfd, rules/arrlss,
  rules/contest, rules/cqww, rules/dxped, rules/eusprint, rules/lzdx,
  rules/pacc_dx, rules/pacc_pa, rules/qso, rules/spdx_dx, rules/spdx_sp,
  rules/ssa_mt, rules/template, rules/wpx: fix format and drop false comment in
  rule files

2011-09-24  Thomas Beierlein <tomjbe@gentoo.org>

  * share/logcfg.dat, src/main.c, src/parse_logcfg.c, src/showscore.c,
  tlf.1.in: drop MANY_CALLS config statement

  * datastructures: commented use of 'mults_possible' array

2011-09-19  Thomas Beierlein <tomjbe@gentoo.org>

  * src/readcalls.c: Correct rescoring for WYSIWYG_* methods

  * src/addmult.c: strip trailing spaces from comment for WYSIWYG_... handling 

  * src/readcalls.c: Fixed handling of comments for WYSIWYG_ONCE and _MULTI  -
  Old code dropped multi at first space in comment string. Changed to strip
  only trailing spaces. Was so back before tlf-0.9.21

  * src/readcalls.c, src/recall_exchange.c, src/searchcallarray.c: Fix wrong
  use of callarray_nr

2011-09-22  Thomas Beierlein <tomjbe@gentoo.org>

  * src/addmult.c, src/changepars.c, src/getexchange.c, src/globalvars.h,
  src/main.c, src/searchlog.c, src/showscore.c: Switch mults_possible[] to a
  growing array.

2011-09-21  Thomas Beierlein <tomjbe@gentoo.org>

  * src/main.c, src/searchlog.c: add comments and rearrange variable
  definitions

2011-09-20  Thomas Beierlein <tomjbe@gentoo.org>

  * src/parse_logcfg.c: Logcfg.dat now allows >9 points for scoring  Fix
  possible overflows if there are point declaration above 9 points. 

2011-09-15  Thomas Beierlein <tomjbe@gentoo.org>

  * README: Add a summary description to README.  The summary was copied from
  the TLF page on Savannah. It gives a short intro which is shown on GitHubs
  TLF repo page.

2011-07-26  Thomas Beierlein <tb@forth-ev.de>

  * tlf.1.in: Drop ORION exception from RIGMODEL explanation

2011-06-10  Thomas Beierlein <tb@forth-ev.de>

  * src/callinput.c, src/clear_display.c, src/getexchange.c, src/keyer.c,
  src/logit.c, src/main.c, src/sendbuf.c: make curx and cury local variables

2011-06-08  Thomas Beierlein <tb@forth-ev.de>

  * src/getpx.c, src/showinfo.c: Adding comments, small improvements, cleanup

2011-05-31  Thomas Beierlein <tb@forth-ev.de>

  * src/log_to_disk.c, src/log_to_disk.h: add spot to bandmap for stations
  worked in S&P

2011-05-29  Thomas Beierlein <tb@forth-ev.de>

  * config.h.in, configure.in: some modernisation

2011-05-11  Thomas Beierlein <tb@forth-ev.de>

  * src/background_process.c, src/log_to_disk.c, src/log_to_disk.h,
  src/logit.c, src/scroll_log.c: fixed handling of exclusive access to
  log_to_disk

2011-05-02  Thomas Beierlein <tb@forth-ev.de>

  * src/addcall.c, src/getctydata.c: simplify

  * src/set_tone.c: drop unneeded calculation of speedstr

2011-04-29  Thomas Beierlein <tb@forth-ev.de>

  * src/addcall.c, src/readcalls.c, src/searchcallarray.c: Fixed handling of
  callarray entries

2011-04-14  Thomas Beierlein <tb@forth-ev.de>

  * src/addmult.c: use #define instead of fixed value for number of bands

  * src/addspot.c: spot broadcasts to other stations contains the identifier of
  the sending station now

  * src/addcall.c: add_call() remembers worked band now

  * src/readcalls.c: regroup code fragment

2011-03-03  Thomas Beierlein <tb@forth-ev.de>

  * src/searchlog.c: correct position of pfx in bottom line of check window

2011-07-21  Thomas Beierlein <tb@forth-ev.de>

  * Makefile.am, New_Bandmap.txt: add New_Bandmap.txt to EXTRA_DIST  File
  contains description of new bandmap features.

2011-07-23  Thomas Beierlein <tb@forth-ev.de>

  * src/grabspot.c: fix compilation without hamlib

2011-07-06  Thomas Beierlein <tb@forth-ev.de>

  * src/callinput.c, src/grabspot.c: implemented scanning up and down in
  grab_next()  switch keys: ctrl-g is for scanning now as Alt-g gets grabbed
  from the terminal emulator

2011-07-05  Thomas Beierlein <tb@forth-ev.de>

  * src/callinput.c: change meaning of Alt-G to jump to next spot

  * src/bandmap.c, src/bandmap.h, src/grabspot.c: extended 'grab' function to
  switch to next spot up- or downwards

2011-07-04  Thomas Beierlein <tb@forth-ev.de>

  * src/grabspot.c: Grabspot switches to S&P if in run mode and remembers QRG

  * src/bandmap.c, src/bandmap.h, src/grabspot.c, src/main.c, src/main.h:
  started new grabspot implementation

2011-06-28  Thomas Beierlein <tb@forth-ev.de>

  * src/bandmap.c, src/bandmap.h: First work on grabspot

2011-06-27  Thomas Beierlein <tb@forth-ev.de>

  * src/bandmap.c, src/bandmap.h: restructure filtering

2011-06-23  Thomas Beierlein <tb@forth-ev.de>

  * src/bandmap.c: add some comments

  * src/bandmap.c: - rename 'spots' structure to 'allspots' - add mutex to
  protect 'allspots' data structure

2011-06-10  Thomas Beierlein <tb@forth-ev.de>

  * src/cluster_bg.c, src/getctydata.c, src/getctydata.h: implement getctynr
  which does not change any global strings like pfstr, ituzone, countrynr,
  continent and so on ... (port from tlf-1.0.5)

2011-05-16  Thomas Beierlein <tb@forth-ev.de>

  * src/addspot.c, src/bandmap.c: fix display of reporting node

2011-05-02  Thomas Beierlein <tb@forth-ev.de>

  * src/bandmap.c: Fix bandmap_show crashes

2011-04-29  Thomas Beierlein <tb@forth-ev.de>

  * src/addcall.c, src/readcalls.c, src/searchcallarray.c: Fixed handling of
  callarray entries

2011-04-14  Thomas Beierlein <tb@forth-ev.de>

  * src/bandmap.c: bm_isdupe() respects worked band now

  * src/bandmap.c: fix display of dupes in bandmap

  * src/addspot.c: spot broadcasts to other stations contains the identifier of
  the sending station now

  * src/callinput.c: '.' calls new bm_menu() now

  * src/bandmap.c, src/bandmap.h: bm_is_dupe() check implemented

  * src/readcalls.c: regroup code fragment

2011-03-09  Thomas Beierlein <tb@forth-ev.de>

  * src/cluster_bg.c: - drop display of old bandmap - call bm_show() to display
  the new one

2011-03-08  Thomas Beierlein <tb@forth-ev.de>

  * src/tlf.h: new definition of BANDINDEX_xx

2011-03-07  Thomas Beierlein <tb@forth-ev.de>

  * src/Makefile.am, src/bandmap.c, src/bandmap.h, src/cluster_bg.c,
  src/splitscreen.c: First work for new bandmap  - add bandmap.[ch] - call
  according functions - bandmap stores freq in Hz as integers

2011-02-24  Thomas Beierlein <tb@forth-ev.de>

  * src/showinfo.c: - correct display of 1A stations - simplify

2011-02-25  Thomas Beierlein <tb@forth-ev.de>

  * src/bandmap.h: First steps to define the behaviour of the new bandmap

2011-02-23  Thomas Beierlein <tb@forth-ev.de>

  * src/addcall.c, src/cluster_bg.c, src/searchcallarray.c, src/tlf.h: - fix
  wrong false return value from searchcallarray - simplify

2011-02-22  Thomas Beierlein <tb@forth-ev.de>

  * src/main.c, src/makelogline.c, src/score.c: simplify handling of score
  points

  * configure.in, src/Makefile.am, src/addcall.c, src/addspot.c,
  src/callinput.c, src/cluster_bg.c, src/dxcc.c, src/dxcc.h, src/getctydata.c,
  src/getmessages.c, src/getwwv.c, src/globalvars.h, src/main.c,
  src/makelogline.c, src/muf.c, src/readctydata.c, src/score.c,
  src/searchlog.c, src/showinfo.c, src/showpxmap.c, src/tlf.h: switch cty data
  handling to growing arrays  needs GLib, so also add a check to configure.in

2011-06-09  thomas beierlein <tb@forth-ev.de>
	version 1.0.5
	* fixes some nasty racing condition between bandmap code and 
	  checkwindow. In result prefix in lower line of checkwindow
	  got displayed wrong, but country was right.
	  Thanks Martin OK1RR for reporting.

2011-05-22  thomas beierlein <tb@forth-ev.de>
	version 1.0.4
	* fix for wrong handling of recalled exchange - 
	  Thanks Martin OK1RR for reporting.
	  - All calls from initial exchange file will be recognised even
	    if part of a complex call, e.g. DL1CCL in LA/DL1CCL/p 
	  - All calls from former QSO's have to be exact including any
	    pre- or postcombination
	  - Now complete exchange will be recalled (not only first word)

2011-02-07  thomas beierlein <tb@forth-ev.de>
	version 1.0.3
	* fix buffer overflow in 'send_lan_message'
	* fix wrong count of points and qso's for last band entry. 
	  Thanks Martin OK1RR for reporting.

2011-01-31  thomas beierlein <tb@forth-ev.de>
	version 1.0.2
	* fix bug in sendto call. cwdaemon needs a zero terminated string. 
	  Thanks for reporting Andy G4KNO

2011-01-15  thomas beierlein <tb@forth-ev.de>
	version 1.0.1
	* fix calculation of sun up and down time based on longitude
	  from country description in cty.dat

2011-01-13  thomas beierlein <tb@forth-ev.de>
	* fix bug in cty.dat and in the routine which reads in the file

2011-01-08  thomas beierlein <tb@forth-ev.de>
	* fix logfile read error. Last QSO got reead twice.
	* Optimize searchlog() for speed and also optimize partial call
	  lookup.

2010-12-23  thomas beierlein <tb@forth-ev.de>
	version 1.0.0
	* fix some possible buffer overflow in exchange handling for 
	  cqww
	* fix handling of changing RST, especially resetting the values to
	  59/599
	* make Backspace and Delete-Keys the same

2010-12-19  thomas beierlein <tb@forth-ev.de>
	* fix some code problems reported by Stephan F8FCE. Thanks.
	* changed ESC handling in comment and call input field

2010-12-04  thomas beierlein <tb@forth-ev.de>
	* add new cty.dat provided by OK1RR
	* fix typos in man page and clarify CQDELAY handling
	* fix CQDELAY handling in parse_cfg

2010-11-29  thomas beierlein <tb@forth-ev.de>
	* fix parsing for MARKERDOTS and MARKERCALL keywords
	* fix buffer overrun during write of markerfile
	* add new callmaster file provided by OK1RR

2010-10-18  thomas beierlein <tb@forth-ev.de>
	* fix installation commands for 'make distcheck'

2010-09-11  thomas beierlein <tb@forth-ev.de>
	* fix calculation of sunrise and sunset times 
	* fix calculation of QSO Rate
	* some minor fixes of uninitialized variables

2010-01-xx  thomas beierlein <tb@forth-ev.de>
	* better recognition of hamlib install (tnx F8FCE)
	* fix a lot of buffer overrun for string handling (as glibc and gcc
	  use -D_FORTIFY_SOURCE for stricter checking of buffer overuns)
	* rewrote handling of initial exchange file. It now allows empty 
	  and comment lines (#) and spaces around the callsign. Leading 
	  space before comment gets ignored.
	* Fix input handling of notes.
	* Fix autocq handling. First characters gets no longer swallowed.
	* Drop code for old not functional LPT_KEYER and COM1_KEYER.
	* strip autogenerated files from repository.

2007-12-21  rein couperus <rein@couperus.com>

	* changed searchlog.c ('possible calls')

2007-12-18	rein couperus <rein@couperus.com>

	* changed cluster_bg.c to fix possible buffer overflow
	
	* changed searchlog.c -> compare now starts at beginning of callsign.

2003-09-10   dimiter (mitko) kroumov <lz3ny@bfra.org>
        version 0.9.1:
	
	* added an autoRXVTdiscovery and a hack XTERM arrows by putting "linux" native driver 
	as TERMinal in the environment.	

	* Introduced WAZMULT (CQWW like) and ITUMULT switches as contest rule multipliers
	
	* logcfg.dat has been split up. added a new "rules/" directory for the contest rules file.


2002-11-03   rein couperus <rein@couperus.com>

  	version 0.8.6:

	* bug  fixes: various modules

	* fixed getctydata.c to interpret ctydb properly

	* fixed bug in callinput.c allowing input of too many characters in call field

	* added TIME_OFFSET to allow running PC on local time instaead of UTC

	* added arrl sweepstakes contest with flexible exchange input

2002-10-01   rein couperus <rein@couperus.com>

  	version 0.8.1:

	* various modules: added  frequency data, talk data and serialnr data network distribution

	* added :info and :freq displays

2002-09-07  rein couperus <rein@couperus.com>

  	version 0.8.0:

	* lancode.c, lancode.h: added networking module

	* various modules:   major code changes to interface to the networking module
		for log data and packet data distribution


2002-08-30  rein couperus  <rein@couperus.com>

 	version 0.7.3:

	* background_process.c:  added cw simulator mode

	* changeparams.c: added command :simulator

	* logit.c, call_input.c:  added simulator code

	* main.c: added various global variables for cw simulator

	* searchlog.c: fixed bug to enable working more than 20 JA's (now 999)


2002-08-30  rein couperus  <rein@couperus.com>

 	version 0.7.2:

	* configure.in : added --enable-hamlib to switch on Hamlib support

	* sendtxinfo.c, main.c: changed the code to support library switch

2002-08-21  rein couperus  <rein@couperus.com>

	version 0.7.1:

	* parse_logcfg.c:  added RIGPORT parameter

	* clusterinfo.c : added ctrl-g support for spot list

2002-08-21  rein couperus  <rein@couperus.com>

	version 0.7.0:

	* sendqrg.c:	added Hamlib support

	* gettxinfo.c:   added Hamlib support

	* parse_logconfig.c: added Hamlib support

	* added rig.h

2002-08-12  rein couperus  <rein@couperus.com>

	version 0.6.1:

	* splitscreen.c:  telnet client does now display correctly when
		long buffers come in.

	* preliminary fix for bandmap display

	* added FIFO interface to cluster monitor

	* added command to logcfg.dat:
		FIFO_INTERFACE
	  this starts a FIFO called clfile in the working directory for
		added flexibility and backward compatability with previous
		versions

2002-08-08  rein couperus   <rein@couperus.com>

	version 0.6.0:

	* major rewrite of all routines making disk access. 

	* Removed all system calls.

	* included telnet client and tnc terminal based on splitscreen by
		Dave Brown, N2RJT. Now fully integrated with tlf.

	* Added commands to logcfg.com:
		TELNETHOST, TELNETPORT
		TNCPORT (1 or 2)



	* callinput.c: ESCAPE now erases call + exchange

	* show_score.c: Color change in header line

	
2002-07-21  rein couperus   <rein@couperus.com>

	* searchlog.c:		now keeps logdata in ram to speed up dupe check
					removed sys calls and reference to /tmp/tlf

	* store_to disk.c	copy logdata into ram array

	* delete_qso.c	remove qso from ram array

	* edit_last.c		change qso in ram array

	* readcalls.c		read qso data into ram array

	* main.c                     added global qso array (3000 qso's)

2002-07-21  rein couperus   <rein@couperus.com>

	* searchlog.c: 		changed partials routine to run in RAM
				added load_partials function

	* main.c:		added load partials from disk

	* time_update.c		removed disk acces to logfile every 5 secs

	* score.c		changed cqww scoring (2 pts within NA)

2002-07-14  Rein Couperus   <rein@couperus.com>

	* edit_last.c:	added instert and delete

	* removed call to tlf_deletelogline

2002-07-13  Rein Couperus   <rein@couperus.com>

	tlf-0.5.4.3:

	* main.c:  	added   mixedmode parameter

	* searchlog.c		added mixed mode capability to dupe logic

	* writecabrillo.c	added  wysiwyg multiplier format and mixed capability

	* changeparameters.c	added :CWMODE, :SSBMODE and :DIGIMODE commands

	* show_help.c 	added new mode switch commands


2002-07-07  Rein Couperus   <rein@couperus.com>

	tlf-0.5.4.2:

	* readcalls.c: fixed logic for wysiwyg multipliers

	* getexchange.c : added "\" command


2002-06-09  Rein Couperus   <rein@couperus.com>

	tlf-0.5.4.1:  adjustments for bugs in debian floppy version
		(delete last qso, write cabrillo)

	* deleteqso.c:  killed the system call to script tlf_deletelogline, wrote
		inline code to do the job.

	*writecabrillo.c: removed system call to 'sed'

2002-05-31 Rein Couperus   <rein@couperus.com>

	tlf-0.5.4:

	* tlf.h: added definition of EDITOR_E3

	* various: added support for e3 editor (debian floppy )

	* clusterinfo.c: read cl3file only if read successful

2002-05-26 Rein Couperus   <rein@couperus.com>

	tlf-0.5.3:

	* getmessages.c:  don't initialize call and logfile name if present in logcfg.dat

	* getctydata.c: bug fix:  calculate right cty for /P calls

2002-05-26 Rein Couperus   <rein@couperus.com>

	tlf-0.5.3:

	*  score.c:  wpx + cqww: added 2 point mode for NA stations

	* searchlog.c:  added red warning signal in case of call lock (check partials)

	* parse_logcfg.c: added generic parameters 2EU3DX_POINTS, COUNTRY_MULT,
		PORTABLE_MULT2 , SERIAL_EXCHANGE  for
		use in logcfg.dat (e.g. in Region 1 field day..).

	* added new parameters and logic to various files to enable "universal" contest

	* edit_last.c : added new code to edit last qso ("@" command)

2002-05-24 Rein Couperus   <rein@couperus.com>

	tlf-0.5.2a: bug fixes:

	* deleteqso.c:  fixed  call to tlf_deletelogline

	* writecabrillo.c:  changed version to 0.5.2

	New feature:  allow CW logging without external keyer....

	* tlf.h: added #definition NO_KEYER

	* write_keyer.c: check explicitly for presence of keyer

	* parse_logcfg.c:  make default NO_KEYER

	* main.c: initialize keyerport to NO_KEYER

	* keyer.c: bail out if NO_KEYER

	* sendbuf.c: bail out if NO_KEYER

2002-05-24 Rein Couperus   <rein@couperus.com>

	* tlf-0.5.2: Automatic generation of .paras file in working directory

	* changed tlf_cleanup to automatically generate clfile and wwvfile at startup

	* removed .paras, clfile, wwvfile and logfiles from /examples/xxx/

	* added parameter MANY_CALLS to logcfg.dat

	* added parameters POWERMULT to logcfg.dat (for arrlfd)

	* update of scoring routine for arrlfd

	* added larger partial call window



2002-05-19  Rein Couperus  <rein@couperus.com>

	* tlf-0.5.1: Initial version with automake and autoconf.

